---
title: Deployment Toolkit - Path to Live
sidebar: overview_sidebar
keywords: guidance
permalink: dep_devptl.html
toc: false
folder: deployment
---

<div class="mxgraph" style="max-width:100%;" data-mxgraph="{&quot;highlight&quot;:&quot;#0000ff&quot;,&quot;lightbox&quot;:false,&quot;nav&quot;:true,&quot;edit&quot;:&quot;_blank&quot;,&quot;xml&quot;:&quot;&lt;mxfile host=\&quot;app.diagrams.net\&quot; modified=\&quot;2021-01-06T15:59:26.223Z\&quot; agent=\&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36\&quot; etag=\&quot;Kp30Jg8qg_jLJyelQSvC\&quot; version=\&quot;14.1.8\&quot; type=\&quot;device\&quot;&gt;&lt;diagram name=\&quot;Page-1\&quot; id=\&quot;12e1b939-464a-85fe-373e-61e167be1490\&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;&quot;}"></div>
<script type="text/javascript" src="https://viewer.diagrams.net/js/viewer-static.min.js"></script>

## Development

### Analysis

During this stage, suppliers will conduct any initial engagement, analysis etc.. required to get development underway. The TKW Simulators (<a href="https://hub.docker.com/r/nhsdigitalmait/tkw_uec_provider_simulator" target="_blank">Provider Simulator</a> and
<a href="https://hub.docker.com/r/nhsdigitalmait/tkw_uec_consumer_simulator" target="_blank">Consumer Simulator</a>) are useful tools for this stage.

The solution can be tested at any stage of development using these tools and the TKW Simulators will provide useful validation reports to highlight points of failure or oversight. These is more about testing during development maturity under the <a href="dep_testtesting.html" target="_blank">Testing section</a> of this Deployment Toolkit. 

### Development Complete

Once Development is complete, the suplier can move onto Integration Testing.

## Integration Testing

Integration testing can be a challenging step. It involves gaining access to the SPINE Integration Environment (INT).
There are a series of pre-requestites and steps to complete before you can begin integration testing which equate to <a href="assurance_supplier.html#technical-accreditation" target="_blank">Technical Accreditation</a>.

### Pre-Requisites
 
Below are the prerequisites that need to be established before it is possible to connect to the INT environment:
 * You must have HSCN connectivity 
 * You must have started the on-boarding (SCAL) process with the NHS Digital Solutions Assurance team

### Getting connected
Once you have the above pre-requisites you will need to <a href="https://digital.nhs.uk/services/path-to-live-environments/connect-to-a-path-to-live-environment" target="_blank">get connected to the INT environment</a>. This requires a series of steps:

1. Register or modify your FQDN with the NHS' DNS service 
 * You will find the <a href="https://digital.nhs.uk/forms/dns-request-form-for-path-to-live-environments" target="_blank">DNS request form here</a>.
 * You need to know what your URL is  
2. Register or modify your messaging product with Spine 
 * Use the <a href="https://digital.nhs.uk/forms/manufacturer-product-version-registration-request" target="_blank£">MPV registration request form</a> for this
3. Request new certificates and/or create or modify endpoints 
 * Use the <a href="https://digital.nhs.uk/forms/combined-endpoint-and-service-registration-request" target="_blank">Combined endpoint and service registration request form</a> for this
 
### Configure your environment to connect to SSP: 
<details>
<summary>Click to see step-by-step guide to requesting certificates</summary>
<div class="expanded-class" markdown="1">
The process for generating a CSR and Private Key

Prerequisite 
* OpenSSL installed

1. Open a command prompt (CMD)
2. Navigate to the folder you want the CSR to go into (e.g. C:\Users\johnsmith\Desktop)
3. C:\Users\johnsmith\Desktop>openssl req -out <FQDN>.csr -new -newkey rsa:2048 -nodes -keyout <FQDN>.key 

</div>
<summary>Click to see step-by-step guide to installing certificates</summary>
<div class="expanded-class" markdown="1">
 
1. Install the cert you have been given to local cert store and bind you your site e.g. – *xxx.thirdparty.nhs.uk* etc 
2. Configure your firewall to make outbound connections to: *https://proxy.int.spine2.ncrs.nhs.uk/[provider service root url]/[fhir request]* 
   * See <a href="https://digital.nhs.uk/services/path-to-live-environments/integration-environment#messaging-urls" target="_blank">here</a> for more information 
3. Configure your firewall to receive connection inbound from msg-out.int.spine2.ncrs.nhs.uk 
   * See <a href="https://digital.nhs.uk/services/path-to-live-environments/integration-environment#outbound-network-address-translation-nat-addresses" target="_blank">here</a> for more information 
4. Root CA and Sub CA installed in cert store and added to bindings for local site in SSL/TLS
   * as described <a href="https://digital.nhs.uk/services/path-to-live-environments/integration-environment#rootca-and-subca-certificates" target="_blank">here</a>
   * Note: contrary to the information in that link, PLEASE ENSURE YOU PUT BOTH CERTIFICATES IN (SHA1 + SHA2) 
   (See <a href="https://digital.nhs.uk/services/path-to-live-environments/integration-environment" target="_blank">documentation</a> for more information) 
5. Configure and check Certificate revocation (CRL checks) for both old (SHA1) and new (SHA2) root certs. 
   Note: They use different revocation methods 
   * New method (SHA2) needs the following:
     * The SubCA/RootCA will point to this URL: "http://crl.nhs.uk/int/1c/crlc2.crl".  This location will download a CRL file locally and will add CRL checks in.
     * Local TLS should be configured to go check this file.  
     * It is on the INTERNET so please configure firewall outbound rules to be able to go to this URL over the internet. 

   * Old method (SHA1) needs the following: 
     Note: The CDP is a relative request to an LDAP query, this is not live and not accessible. 
     * So the process required is to download the file and load it locally into the CRL cache and then configure the service to not check for a new file 
     * The CRL files can be downloaded from <a href="http://checkit/public/pki/crls.php" target="_blank">here</a>: "http://checkit/public/pki/crls.php".  
        * This location is on HSCN. 
        * This file is updated every day.  However it is large, and so it is acceptable to have a batch process which updates it on a longer schedule. (we recommend once per week)
        * For your clients you will obviously need this to be a batch process to download and install. 
     Note – you need to find the correct CRL file for the right SSP integration or live environment 
    * If you are using IIS:- 
        * There is a way of setting IIS CRL to default to the cached file and use that even if the downloaded CRL expiry date is in the past.
        * If CertCheckMode is set to 2, certificate revocation verification will be done based on the cached CRL on the IIS server. IIS will not try to connect to the remote server to download the CRL even if it has expired and in which case CRL verification will fail (see; <a href="https://docs.microsoft.com/en-gb/windows/win32/api/http/ns-http-http_service_config_ssl_param?redirectedfrom=MSDN" target="_blank">MSDN Article</a>).
  
</div>
</details>
         
### End-to-End test

Once set up on the Integration Environment it is possible to perform like-live tests, including making requests to spine components - SDS, SSP - and interacting with other supplier solutions. 

The end-to-end tests can be characterised in either an informal, ad hoc, approach where suppliers may contact each other to arrange tests, or more formal <a href="dep_testplan.html" target="_blank">Test Plans</a> can be followed. If a formal test is required the Booking Team will take the lead, requesting systems to be configured, arrange a meeting time and guide users through a step-by-step test plan. The formal approach would be required for a supplier to demonstrate their solution (part of the assurance process) or gather evidence for their SCAL submission.  

## Assure

Assurance is a vital step in developing a Booking solution for either Provider or Consumer functionality. You will engage with the Solutions Assurance Team, via the Booking Team, who will provide the <a href="assurance_scal.html" target="_blank">SCAL</a> (Supplier Conformance Assessment List) document for completion. This is a self-assurance process but there is a requirement to demonstrate the end-to-end functionality and provide documented evidence of how the solution meets the Standard.

The TKW Simulator can provide supporting evidence documents required by the SCAL.

### Technical Conformance Certificate

A Technical Conformance Certificate confirms NHS Digital are satisfied the solution meets the published Standard. The supplier is subsequently able to progress to live testing with a service providers in the Production environment. 

## Provider Testing

The first live Production test a supplier will undertake will be a controlled test, following a pre-determined <a href="dep_testplan.html" target="_blank">Test Plan</a>. The test will involve all actors (Service Provider, Supplier(s), DoS Leads etc) and aim to prove end-to-end functionality of the supplier solution with components - DoS, SDS & SSP, along with other existing supplier soltions. 

In the unlikely event of an issue being raised at this point, it provides time for resolution prior to business go-live, whether it be in the developed solution itself or setup and configuration.

### Live Install

The Live install of a Provider, to support the Provider Test, can only be performed once the Technical Conformance Certificate has been issued and Connection Agreement confirmed.

It is expected the supplier will dedicate project management resource to arranging the Live install of their customer; the Provider. The Live install will take place as part of the preparations for the end-to-end Provider Test which includes ensuring the following steps are complete:

* Connectivity to <a href="https://digital.nhs.uk/services/health-and-social-care-network/new-hscn-connections" target="_blank">HSCN</a>
* Establish <a href="https://digital.nhs.uk/services/health-and-social-care-network/connection-governance" target="_blank">Connection Agreement</a>
*	Register <a href="https://digital.nhs.uk/forms/dns-request-form-for-path-to-live-environments" target="_blank">FQDN</a>
*	Register Product with the Spine - Manufacturer Product Version Registration
*	Request & install certificates 
* Assignment of ASID(s)
*	Assign interactions (SDS/SSP) to ASID
*	Ensure Firewalls are open for connections
* Upgrade & configuration of Provider system with supplier solution
*	Configure DoS

## Technical Live

At this point, assuming the Provider Testing has been successful, the solution is now technically ready to go live. The supplier, service provider and supporting leads e.g. DoS lead, Commisioners etc. can agree a date to start using the solution in Production. 

### Business Live

On the agreed date of go-live, the system will be 'switched on', an end-to-end test run to verify functionality and the service declared live. The solution moves from a project into BAU (Business as Usual), supported by all usual processes e.g. Technical Support. 

Depending on the supplier's adopted methodolgy, the solution may be monitored and enhanced to support more complex workflows or functional additions. This is a typcial process within the SDLC (Software Development LifeCycle).
